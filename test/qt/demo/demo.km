do (show DemoWindow);

do (listen (DemoWindow.closed))
    | concat-map (&(_)(exit 0))
    | forever;

do (listen (DemoWindow.resized))
    | concat-map (
        & { width, height }
        println ("Current Size: (#, #)" (str width) (str height))
    )
    | catch* (&(err)(crash err))
    | forever;

do (listen (ChangeTextButton.clicked))
    | concat-map (&(_)(random ()))
    | map* (&(x)(str x))
    | concat-map (&(text)(TextDisplay | set-text text))
    | forever;

do (listen (TextInput.text))
    | debounce 300
    | concat-map (
        & text
        (TextDisplay | set-text text)
        | then (println ("Current Text: #" text))
    )
    | catch* (&(err)(crash err))
    | forever;
