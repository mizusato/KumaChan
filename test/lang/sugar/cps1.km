do
    let eff :=
        ~ concat-map &(x) := emit* (range 0 10),
        ~ then println (str x),
            println '---',
    eff | catch* (&(_)(crash 'I/O Error'))
        | wait-complete;
