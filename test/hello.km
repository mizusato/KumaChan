module Hello;

do OS::Stdout
   | write-line  if $(Yes and2 No) { '你好，世界' } else { 'Hello World' }
   | catch       lambda _ exit 1
   | then        (OS::Stdout | write-line str! factorial 10)
   | catch       lambda _ exit 1
   | then        exit 0;

private function and2 {
    lambda (Bool,Bool) Bool:
    lambda (a,b) switch(a) {  // TODO: multi-switch
        case Yes: switch(b) {
            case Yes: Yes,
            case No:  No
        },
        case No: No
    }
};

private function factorial {
    lambda Integer Integer:
    lambda n
        if $(n <= 1) {
            1
        } else {
            $(n * (factorial $(n - 1)))
        }
};
