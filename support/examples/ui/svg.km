do ui-init 'SVG' DOM;

do UI::ExitWhenWindowClosed;

private const DOM: NoExcept*[UI::Node]
    tick { interval: 100 }
    | scan 0.0 (&(theta,_)(% (+ theta (/ Math::Tau 80.0)) Math::Tau))
    | map* ( &(theta)
        (dom-node 'svg' {
            styles:  (dom-styles [('width','300px'),('height','300px')]),
            attrs:   (dom-attrs [('viewBox','0 0 100 100')]),
            content: (dom-children [
                (dom-node 'rect' {
                    attrs: (dom-attrs [
                        ('x',      (str (+ 50.0 (* 20.0 (cos theta))))),
                        ('y',      (str (+ 50.0 (* 20.0 (sin theta))))),
                        ('width',  '20'),
                        ('height', '20'),
                        ('fill',   '#FF3333')
                    ])
                })
            ])
        })
    );
