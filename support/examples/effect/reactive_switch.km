import assets from './assets';

type Value union {
     type Double (String,String);
     type Single { content: String };
};

do ui-init 'Reactive Switch' DOM;

do ui-inject-css [assets::style-css];

do UI::ExitWhenWindowClosed;

private const DOM: NoExcept*[UI::Node]
    ~ with-reactive* &(v) := Single { content: 'a value' },
    let editor: NoExcept*[UI::Node] :=
        switch v:
        case Double (x, y):
            UI::Container [
                UI::TextInput x,
                UI::TextInput y
            ],
        case Single {content}:
            UI::TextInput content,
        end,
    UI::Container [
        editor,
        UI::Button 'init double' (v.emit (Double 'a' 'b')),
        UI::Button 'init single' (v.emit (Single { content: 'foo' })),
        ~ switch-map &(v) := watch v,
            switch v:
            case Double (x, y):
                UI::Text ("[Double] (#, #)" x y),
            case Single {content}:
                UI::Text ("[Single] #" content),
            end
    ];
