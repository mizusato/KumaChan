public const Stdin:  FileReadOnly
    native 'OS::Stdin';
public const Stdout: FileWriteOnly
    native 'OS::Stdout';
public const Stderr: FileWriteOnly
    native 'OS::Stderr';

public function scan:  (&()(Effect[String,I/O::Error]))
    ( &(_)
        let read := Stdin | read-string,
        if $(Kind = 'windows'):
            read | map (&(str)(str.trim-suffix ''..\r)),
        else:
            read
    );
public function print: (&(String)(Effect[-,I/O::Error]))
    (&(line)(Stdout | write-string line));
public function error: (&(String)(Effect[-,I/O::Error]))
    (&(line)(Stderr | write-string line));

public function scanln:  (&()(Effect[String,I/O::Error]))
    ( &(_)
        let read := Stdin | read-line,
        if $(Kind = 'windows'):
            read | map (&(str)(str.trim-suffix ''..\r)),
        else:
            read
    );
public function println: (&(String)(Effect[-,I/O::Error]))
    (&(line)(Stdout | write-line line));
public function errorln: (&(String)(Effect[-,I/O::Error]))
    (&(line)(Stderr | write-line line));
